version: '3.9'

services:
  wechat2tg:
    image: hououinkami/wechat2tg-pad:latest
    container_name: wx2tg
    volumes:
      - ./config:/app/storage
      - ./save-files:/app/save-files # ä¿å­˜æ–‡ä»¶å¤¹æŒ‚è½½åè´´çº¸æ–‡ä»¶ä¸éœ€è¦é‡æ–°è½¬æ¢
      # - ./src:/app/src
      # - ./src/client/WechatClient.ts:/app/src/client/WechatClient.ts
      # - ./src/i18n/locales/zh.ts:/app/src/i18n/locales/zh.ts
      # - ./src/util/EmojiUtils.ts:/app/src/util/EmojiUtils.ts
    # use env file or you can jest set environment here
    # env_file: ".env"
    ports:
      - "3000:3000"
    environment:
      TZ: Asia/Shanghai
      BOT_TOKEN: ${TG_BOT_TOKEN}
      # PROXY_HOST: ''
      # PROXY_PORT: ''
      # ä»£ç†ç±»å‹:socks5,http,https
      # PROXY_PROTOCOL: 'socks5'
      # ç”¨æˆ·åå¯†ç å¯é€‰
      # PROXY_USERNAME: ''
      # PROXY_PASSWORD: ''
      # å‘é€å¤§æ–‡ä»¶æ‰€éœ€çš„Telegram APIé…ç½®(å¯é€‰)
      API_ID: ${TG_API_ID}
      API_HASH: ${TG_API_HASH}
      # ç¾¤æ¶ˆæ¯æ ¼å¼
      ROOM_MESSAGE: '<blockquote><b>ğŸŒ#[topic]</b> â€”â€” <b>ğŸ‘¤#[alias_first]</b></blockquote>'
      # å…¬ä¼—å·æ¶ˆæ¯æ ¼å¼
      OFFICIAL_MESSAGE: '<blockquote><b>ğŸ“£#[name]</b></blockquote>'
      # è”ç³»äººæ¶ˆæ¯æ ¼å¼
      CONTACT_MESSAGE: '<blockquote><b>ğŸ‘¤#[alias_first]</b></blockquote>'
      # ç¾¤æ¶ˆæ¯æ ¼å¼(ç¾¤ç»„ä¸‹)
      ROOM_MESSAGE_GROUP: '<blockquote><b>ğŸ‘¤#[alias_first]</b></blockquote>'
      # å…¬ä¼—å·æ¶ˆæ¯æ ¼å¼(ç¾¤ç»„ä¸‹)
      OFFICIAL_MESSAGE_GROUP: ' '
      # è”ç³»äººæ¶ˆæ¯æ ¼å¼(ç¾¤ç»„ä¸‹)
      CONTACT_MESSAGE_GROUP: ' '
      # è‡ªåŠ¨åˆ›å»ºå¾®ä¿¡ç¾¤ç»„çš„åç§°æ ¼å¼
      CREATE_ROOM_NAME: '#[topic]'
      # è‡ªåŠ¨åˆ›å»ºè”ç³»äººç¾¤ç»„çš„åç§°æ ¼å¼
      CREATE_CONTACT_NAME: '#[alias_first]'
      # æ–‡å­—æ¶ˆæ¯æ˜¾ç¤ºæ ¼å¼:#[identity]èº«ä»½æ–‡æœ¬,#[body]:æ¶ˆæ¯æ–‡æœ¬,#[br]æ¢è¡Œ
      MESSAGE_DISPLAY: '#[identity]#[br]#[body]'
      # Gewechaty
      BASE_API: 'http://gewe:8031/v2/api'
      FILE_API: 'http://gewe:8032/download'
      CALLBACK_API: 'http://127.0.0.1:3000'
    restart: unless-stopped
  gewechat:
    image: registry.cn-chengdu.aliyuncs.com/tu1h/wechotd:alpine
    container_name: gewe
    volumes:
      - ./temp:/root/temp
    ports:
      - "8031:2531"  # APIæœåŠ¡ç«¯å£
      - "8032:2532"  # æ–‡ä»¶ä¸‹è½½æœåŠ¡ç«¯å£
    environment:
      TZ: Asia/Shanghai
    restart: always
