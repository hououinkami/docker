services:
  wechat2tg:
    image: ${IMAGE_NAME:-finalpi/wechat2tg-pad:latest}
    container_name: wx2tg
    volumes:
      - ./config:/app/storage
      - ./save-files:/app/save-files # ä¿å­˜æ–‡ä»¶å¤¹æŒ‚è½½åè´´çº¸æ–‡ä»¶ä¸éœ€è¦é‡æ–°è½¬æ¢
      - ./src:${CONTAINER_DIR:-/app/src_temp} # è°ƒè¯•ç”¨
      - ./sticker:/app/sticker # è´´çº¸æ˜ å°„ä¿¡æ¯
    env_file: ".env"
    # ports:
    #  - "3080:3000"
    environment:
      TZ: Asia/Shanghai
      BOT_TOKEN: ${TG_BOT_TOKEN}
      API_ID: ${TG_API_ID}
      API_HASH: ${TG_API_HASH}
      # ä»£ç†é…ç½®(å¯é€‰)
      # åè®®socks5,http,https
      # PROXY_PROTOCOL=socks5
      # PROXY_HOST=
      # PROXY_PORT=
      # PROXY_USERNAME=
      # PROXY_PASSWORD=
      # è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿é…ç½®:(#[alias]:è”ç³»äººå¤‡æ³¨,#[name]:è”ç³»äººæ˜µç§°,#[topic]:ç¾¤èŠæ˜µç§°,#[alias_first]:å¤‡æ³¨ä¼˜å…ˆ,å¦‚æœæ²¡æœ‰å¤‡æ³¨å°±æ˜¾ç¤ºè”ç³»äººçš„æ˜µç§°)
      ## ç¾¤æ¶ˆæ¯æ ¼å¼
      ROOM_MESSAGE: '<blockquote><b>ğŸŒ#[topic]</b> â€”â€” <b>ğŸ‘¤#[alias_first]</b></blockquote>'
      ## å…¬ä¼—å·æ¶ˆæ¯æ ¼å¼
      OFFICIAL_MESSAGE: '<blockquote><b>ğŸ“£#[name]</b></blockquote>'
      ## è”ç³»äººæ¶ˆæ¯æ ¼å¼
      CONTACT_MESSAGE: '<blockquote><b>ğŸ‘¤#[alias_first]</b></blockquote>'
      ## ç¾¤æ¶ˆæ¯æ ¼å¼(ç¾¤ç»„ä¸‹)
      ROOM_MESSAGE_GROUP: '<blockquote><b>ğŸ‘¤#[alias_first]</b></blockquote>'
      ## å…¬ä¼—å·æ¶ˆæ¯æ ¼å¼(ç¾¤ç»„ä¸‹)
      OFFICIAL_MESSAGE_GROUP: ' '
      ## è”ç³»äººæ¶ˆæ¯æ ¼å¼(ç¾¤ç»„ä¸‹)
      CONTACT_MESSAGE_GROUP: ' '
      ## è‡ªåŠ¨åˆ›å»ºå¾®ä¿¡ç¾¤ç»„çš„åç§°æ ¼å¼
      CREATE_ROOM_NAME: '#[alias_first]'
      ## è‡ªåŠ¨åˆ›å»ºè”ç³»äººç¾¤ç»„çš„åç§°æ ¼å¼
      CREATE_CONTACT_NAME: '#[alias_first]'
      ## æ–‡å­—æ¶ˆæ¯æ˜¾ç¤ºæ ¼å¼:#[identity]èº«ä»½æ–‡æœ¬,#[body]:æ¶ˆæ¯æ–‡æœ¬,#[br]æ¢è¡Œ
      MESSAGE_DISPLAY: '#[identity]#[br]#[body]'
      # Gewechaty
      BASE_API: 'http://xxxbot:9011/VXAPI'
      FILE_API: ''
      CALLBACK_API: 'http://10.0.0.1:8088/wx849/callback'
      # è°ƒè¯•æ¨¡å¼ï¼ˆé»˜è®¤falseï¼‰
      DEBUG_MODE: ${DEBUG_MODE:-false}
    restart: unless-stopped
  xxxbot:
    image: nanssye/xxxbot-pad:latest
    container_name: xxxbot
    restart: unless-stopped
    pull_policy: always # ç¡®ä¿æ¯æ¬¡éƒ½æ£€æŸ¥å¹¶æ‹‰å–æœ€æ–°çš„é•œåƒ
    ports:
      - "9090:9090" # ç®¡ç†åå°ç«¯å£
      - "3000:3000" # WeTTyç»ˆç«¯ç«¯å£
      # - "8088:8088" # å›è°ƒç«¯å£
      - "9011:9011" # WechatAPIæœåŠ¡å™¨ç«¯å£
    volumes:
      - ./xxxbot/main_config.toml:/app/main_config.toml # ä¸»é…ç½®æ–‡ä»¶
      - ./xxxbot/bot_status_admin.json:/app/admin/bot_status.json # ç®¡ç†åå°ä½¿ç”¨çš„æœºå™¨äººçŠ¶æ€æ–‡ä»¶
      - ./xxxbot/bot_status.json:/app/bot_status.json # ä¸»ç¨‹åºä½¿ç”¨çš„æœºå™¨äººçŠ¶æ€æ–‡ä»¶
      - ./xxxbot/robot_stat.json:/app/resource/robot_stat.json # å¾®ä¿¡è´¦å·ä¿¡æ¯æ–‡ä»¶
      - ./xxxbot/login_stat.json:/app/WechatAPI/Client/login_stat.json # ç™»å½•çŠ¶æ€æ–‡ä»¶
      - ./xxxbot/wx849_callback_daemon.py:/app/wx849_callback_daemon.py
      - ./xxxbot/wx849_callback_config.json:/app/wx849_callback_config.json
      - ./xxxbot/redis:/app/849/redis/appendonlydir # Redisæ•°æ®
      - ./xxxbot/avatars:/app/resource/avatars # å¤´åƒæ–‡ä»¶
      - ./xxxbot/plugins:/app/plugins # æ’ä»¶
      - ./xxxbot/dow:/app/dow # æ’ä»¶
      - ./xxxbot/logs:/app/logs # log
      - ./xxx_redis_data:/var/lib/redis # Redishuancun 
    environment:
      TZ: Asia/Shanghai
      ADMIN_USERNAME: ${XXX_USERNAME}
      ADMIN_PASSWORD: ${XXX_PASSWORD}
